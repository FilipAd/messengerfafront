{"ast":null,"code":"import _toConsumableArray from\"/home/flic/messengerfafront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/flic/messengerfafront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{makeStyles}from\"@material-ui/core/styles\";import{Avatar,IconButton,InputBase}from'@material-ui/core';import SendIcon from\"@material-ui/icons/Send\";import Message from'./Message';import ExitToApp from\"@material-ui/icons/ExitToApp\";import{PermPhoneMsg,StarTwoTone}from'@material-ui/icons';import SockJsClient from\"react-stomp\";import client from'react-stomp';import{serverWebSocketUrl,topicsUrl}from'../URLs';import ChatInput from'../forms/ChatInput';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Chat(){var useStyle=makeStyles(function(theme){return{chat:{flex:\"0.6\",display:\"flex\",flexDirection:\"column\",boxShadow:\"0 2px 4px grey\"},chat_header:{height:\"60px\",display:\"flex\",alignItems:\"center\",background:\"#ff964c\",boxShadow:\"0 2px 4px grey\"},chat_header_avatar:{marginLeft:\"10px\",border:\"2px solid #7f1e00\",color:\"#d16519\",background:\"#ffeecb\"},chat_header_name:{marginLeft:\"10px\",color:\"white\",textShadow:\"2px 0 0 #7f1e00, -2px 0 0 #7f1e00, 0 2px 0 #7f1e00, 0 -2px 0 #7f1e00, 1px 1px #7f1e00, -1px -1px 0 #7f1e00, 1px -1px 0 #7f1e00, -1px 1px 0 #7f1e00\"},chat_body:{padding:\"30px 10px\",overflowY:\"auto\",display:\"flex\",flexDirection:\"column\",height:\"80%\"},chat_footer:{display:\"flex\",flex:\"1\",height:\"7%\",borderTop:\"2px solid grey\"},chat_input:{height:\"60%\",width:\"100%\",border:\"none\",marginLeft:\"10px\",fontSize:\"20px\"},chat_form:{display:\"flex\",flex:\"1\",height:\"100px\"},button:{background:\"#ffab6f\",width:\"50px\",height:\"50px\",marginTop:\"5px\",marginBottom:\"5px\",marginLeft:\"5px\",marginRight:\"5px\"},chat_exit:{position:\"relative\",alignSelf:\"right\"}};});var classes=useStyle();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),messageText=_useState2[0],setMessageText=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),clientRef=_useState6[0],setClientRef=_useState6[1];function sendMessage(messagetxt){if(messagetxt!==\"\"){clientRef.sendMessage('/app/user-all',JSON.stringify({message:messagetxt}));setMessageText(\"\");}}function handleOnChange(e){setMessageText(e.target.value);}return/*#__PURE__*/_jsxs(\"div\",{className:classes.chat,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.chat_header,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.chat_header_avatar}),/*#__PURE__*/_jsx(\"div\",{className:classes.chat_header_name,children:/*#__PURE__*/_jsx(\"h2\",{children:\"Ime i Prezime\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.chat_body,children:messages.map(function(msg){return/*#__PURE__*/_jsx(Message,{txt:msg});})}),/*#__PURE__*/_jsx(\"div\",{className:classes.chat_footer,children:/*#__PURE__*/_jsx(ChatInput,{setMessageText:setMessageText,messageText:messageText,sendMessage:sendMessage,handleOnChange:handleOnChange})}),/*#__PURE__*/_jsx(SockJsClient,{url:serverWebSocketUrl,topics:[topicsUrl],onConnect:function onConnect(){console.log(\"Connected\");clientRef.sendMessage('/app/user-all',JSON.stringify({message:\"online sam\"}));},onDisconnect:function onDisconnect(){console.log(\"Disconnected\");},onMessage:function onMessage(msg){setMessages([].concat(_toConsumableArray(messages),[msg]));console.log(msg);},ref:function ref(client){setClientRef(client);}})]});}","map":{"version":3,"sources":["/home/flic/messengerfafront/src/components/Chat.js"],"names":["React","useState","makeStyles","Avatar","IconButton","InputBase","SendIcon","Message","ExitToApp","PermPhoneMsg","StarTwoTone","SockJsClient","client","serverWebSocketUrl","topicsUrl","ChatInput","Chat","useStyle","theme","chat","flex","display","flexDirection","boxShadow","chat_header","height","alignItems","background","chat_header_avatar","marginLeft","border","color","chat_header_name","textShadow","chat_body","padding","overflowY","chat_footer","borderTop","chat_input","width","fontSize","chat_form","button","marginTop","marginBottom","marginRight","chat_exit","position","alignSelf","classes","messageText","setMessageText","messages","setMessages","clientRef","setClientRef","sendMessage","messagetxt","JSON","stringify","message","handleOnChange","e","target","value","map","msg","console","log"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { Avatar,IconButton,InputBase} from '@material-ui/core';\nimport SendIcon from \"@material-ui/icons/Send\";\nimport Message from './Message';\nimport ExitToApp from \"@material-ui/icons/ExitToApp\";\nimport { PermPhoneMsg, StarTwoTone } from '@material-ui/icons';\nimport SockJsClient from \"react-stomp\";\nimport client from 'react-stomp';\nimport { serverWebSocketUrl,topicsUrl } from '../URLs';\nimport ChatInput from '../forms/ChatInput';\n\nexport default function Chat()\n{\n    const useStyle = makeStyles((theme) =>({\n        chat:\n        {\n          flex:\"0.6\",\n          display:\"flex\",\n          flexDirection:\"column\",\n          boxShadow: \"0 2px 4px grey\",\n        },\n        chat_header:\n        {\n            height:\"60px\",\n            display:\"flex\",\n            alignItems:\"center\",\n            background:\"#ff964c\",\n            boxShadow: \"0 2px 4px grey\",\n        },\n        chat_header_avatar:\n        {\n            marginLeft:\"10px\",\n            border:\"2px solid #7f1e00\",\n            color:\"#d16519\",\n            background:\"#ffeecb\",\n        },\n        chat_header_name:\n        {\n            marginLeft:\"10px\",\n            color:\"white\",\n            textShadow: \"2px 0 0 #7f1e00, -2px 0 0 #7f1e00, 0 2px 0 #7f1e00, 0 -2px 0 #7f1e00, 1px 1px #7f1e00, -1px -1px 0 #7f1e00, 1px -1px 0 #7f1e00, -1px 1px 0 #7f1e00\",\n        },\n        chat_body:\n        {\n            padding:\"30px 10px\",\n            overflowY:\"auto\",\n            display:\"flex\",\n            flexDirection:\"column\",\n            height:\"80%\"\n\n        },\n        chat_footer:\n        {\n           display:\"flex\",\n           flex:\"1\",\n           height:\"7%\",\n           borderTop:\"2px solid grey\",\n        },\n        chat_input:\n        {\n            height:\"60%\",\n            width:\"100%\",\n            border:\"none\",\n            marginLeft:\"10px\",\n            fontSize:\"20px\",\n\n        },\n        chat_form:\n        {\n            display:\"flex\",\n            flex:\"1\",\n            height:\"100px\",\n        },\n        button:\n        {\n            background:\"#ffab6f\",\n            width:\"50px\",\n            height:\"50px\",\n            marginTop: \"5px\",\n            marginBottom: \"5px\",\n            marginLeft: \"5px\",\n            marginRight: \"5px\",\n        },\n        chat_exit:\n        {\n           position:\"relative\",\n           alignSelf:\"right\",\n        }\n    }));\n    const classes=useStyle();\n    let [messageText,setMessageText]=useState(\"\");\n    let [messages,setMessages]=useState([]);\n    const[clientRef,setClientRef]=useState(null);\n\n    function sendMessage(messagetxt)\n    {\n        if(messagetxt!==\"\")\n        {\n        clientRef.sendMessage('/app/user-all', JSON.stringify({  \n            message: messagetxt\n        }));\n        setMessageText(\"\");\n        }\n    }\n\n    function handleOnChange(e)\n    {\n        setMessageText(e.target.value);\n    }\n    return (\n        <div className={classes.chat}>\n            <div className={classes.chat_header}>\n            <Avatar className={classes.chat_header_avatar}/>\n            <div className={classes.chat_header_name}>\n                <h2>Ime i Prezime</h2>\n            </div>\n           \n            </div>\n            <div className={classes.chat_body}>\n            {\n            messages.map(msg=> <Message txt={msg}/>)\n            }\n            </div>\n            <div className={classes.chat_footer}> \n                <ChatInput setMessageText={setMessageText} messageText={messageText} sendMessage={sendMessage} handleOnChange={handleOnChange} />\n            </div>\n        <SockJsClient url={serverWebSocketUrl}\n        topics={[topicsUrl]}\n        onConnect={()=>{console.log(\"Connected\");\n        clientRef.sendMessage('/app/user-all', JSON.stringify({  \n            message: \"online sam\"\n        }));}}\n        onDisconnect={()=>{console.log(\"Disconnected\");\n        }}\n        onMessage={(msg)=>{\n            setMessages([...messages,msg]);\n            console.log(msg);\n        }}\n        ref={(client)=>{\n            setClientRef(client);\n        }}>\n        </SockJsClient>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}