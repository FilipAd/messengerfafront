{"ast":null,"code":"var _jsxFileName = \"/home/flic/messengerfafront/src/components/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Sidebar from './Sidebar';\nimport Chat from './Chat';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Grid } from '@material-ui/core';\nimport Background from \"../background.jpg\";\nimport { loginEnd, membersUrl, messageUrl, offlineStatusEnd, onlineMembersUrl, onlineStatusEnd, sendNoticeOnlineStatusUrl, serverWebSocketUrl, simetricKeyS } from '../URLs';\nimport { Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport SockJsClient from \"react-stomp\";\nimport cryptoJs from 'crypto-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  const useStyle = makeStyles(theme => ({\n    app: {\n      display: \"grid\",\n      placeItems: \"center\",\n      backgroundColor: \"#ffdfc9\",\n      height: \"100vh\",\n      backgroundSize: \"cover\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundImage: `URL(${Background})`\n    },\n    app_body: {\n      display: \"flex\",\n      backgroundColor: \"white\",\n      height: \"90vh\",\n      width: \"90vw\",\n      boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.2)\"\n    }\n  }));\n  const classes = useStyle();\n  let me = null;\n  let configToken = null;\n\n  if (localStorage.getItem(\"user\") !== null) {\n    try {\n      var bytes = cryptoJs.AES.decrypt(localStorage.getItem(\"user\"), simetricKeyS);\n      me = JSON.parse(bytes.toString(cryptoJs.enc.Utf8));\n\n      if (me !== null) {\n        configToken = {\n          headers: {\n            Authorization: \"Bearer \" + me.token,\n            UserName: me.username\n          }\n        };\n      }\n    } catch (error) {\n      alert(\"Bad decrypt\");\n    }\n  }\n\n  let [receiver, setReceiver] = useState({});\n  let [redirectToLogin, setRedirectToLogin] = useState(false);\n  let [onlineMembers, setOnlineMembers] = useState([]);\n  const [clientRef2, setClientRef2] = useState(null);\n  let notice = {\n    name: \"bye\",\n    message: \"bye\"\n  };\n  let [messages, setMessages] = useState([]);\n  React.useEffect(() => {\n    axios.get(onlineMembersUrl, configToken).then(res => {\n      setOnlineMembers(res.data);\n      console.log(res.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  React.useEffect(() => {\n    axios.get(messageUrl + me.id + \"/\" + (receiver.id === undefined ? \"0\" : receiver.id), configToken).then(res => {\n      setMessages(res.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n\n  function logout() {\n    axios.get(membersUrl + me.id + offlineStatusEnd, configToken).then(console.log(\"you are online now\")).catch(function (error) //podesi svoj status na offline\n    {\n      console.log(error);\n    });\n    axios.post(sendNoticeOnlineStatusUrl, notice, configToken).then(console.log(\"you are offline now\")).catch(function (error) //posalji svima obavjest da si offline\n    {\n      console.log(error);\n    });\n    localStorage.removeItem(\"user\");\n    sessionStorage.removeItem(\"emailTokenStored\");\n    setRedirectToLogin(true);\n  }\n\n  function updateOnline() {\n    axios.get(onlineMembersUrl, configToken).then(res => {\n      setOnlineMembers(res.data);\n      console.log(\"punimo bazu online iz metode\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  function loadMessagesForChat(receiverDirect) {\n    axios.get(messageUrl + me.id + \"/\" + receiverDirect.id, configToken).then(res => {\n      setMessages(res.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  if (redirectToLogin) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: loginEnd\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.app,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.app_body,\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n        setReceiver: setReceiver,\n        logout: logout,\n        onlineMembers: onlineMembers,\n        loadMessagesForChat: loadMessagesForChat\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Chat, {\n        receiver: receiver,\n        messages: messages,\n        setMessages: setMessages,\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(SockJsClient, {\n        url: serverWebSocketUrl,\n        topics: [\"/topic/user\"],\n        onConnect: () => {\n          console.log(\"Socket for online status connected\");\n          axios.get(membersUrl + me.id + onlineStatusEnd, configToken).then(console.log(\"you are online now\")).catch(function (error) {\n            console.log(error);\n          });\n          let notice = {\n            name: me.username,\n            message: me.usernmae\n          };\n          axios.post(sendNoticeOnlineStatusUrl, notice, configToken).then(console.log(\"everybody i am online\")).catch(function (error) //posalji svima obavjest da si offline\n          {\n            console.log(error);\n          });\n          ;\n        },\n        onDisconnect: () => {\n          console.log(\"Disconnected\");\n          axios.get(membersUrl + me.id + offlineStatusEnd, configToken).then(console.log(\"you are offline now\")).catch(function (error) {\n            console.log(error);\n          });\n          axios.post(sendNoticeOnlineStatusUrl, notice, configToken).then(console.log(\"everybody i am offline\")).catch(function (error) //posalji svima obavjest da si offline\n          {\n            console.log(error);\n          });\n        },\n        onMessage: msg => {\n          updateOnline();\n        },\n        onClose: e => {\n          axios.get(membersUrl + me.id + offlineStatusEnd, configToken).then(console.log(\"you are offline now\")).catch(function (error) {\n            console.log(error);\n          });\n          axios.post(sendNoticeOnlineStatusUrl, notice, configToken).then(console.log(\"everybody i am offline\")).catch(function (error) //posalji svima obavjest da si offline\n          {\n            console.log(error);\n          });\n        },\n        ref: client => {\n          setClientRef2(client);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 11\n  }, this);\n}\n\n_s(Home, \"Yobo6Rfjj7uGQL07BNds1Rto874=\", true);\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/flic/messengerfafront/src/components/Home.js"],"names":["React","useState","Sidebar","Chat","makeStyles","Grid","Background","loginEnd","membersUrl","messageUrl","offlineStatusEnd","onlineMembersUrl","onlineStatusEnd","sendNoticeOnlineStatusUrl","serverWebSocketUrl","simetricKeyS","Navigate","axios","SockJsClient","cryptoJs","Home","useStyle","theme","app","display","placeItems","backgroundColor","height","backgroundSize","backgroundRepeat","backgroundImage","app_body","width","boxShadow","classes","me","configToken","localStorage","getItem","bytes","AES","decrypt","JSON","parse","toString","enc","Utf8","headers","Authorization","token","UserName","username","error","alert","receiver","setReceiver","redirectToLogin","setRedirectToLogin","onlineMembers","setOnlineMembers","clientRef2","setClientRef2","notice","name","message","messages","setMessages","useEffect","get","then","res","data","console","log","catch","id","undefined","logout","post","removeItem","sessionStorage","updateOnline","loadMessagesForChat","receiverDirect","usernmae","msg","e","client"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Sidebar from './Sidebar';\nimport Chat from './Chat';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { Grid } from '@material-ui/core';\nimport Background from \"../background.jpg\";\nimport { loginEnd, membersUrl, messageUrl, offlineStatusEnd, onlineMembersUrl, onlineStatusEnd, sendNoticeOnlineStatusUrl, serverWebSocketUrl, simetricKeyS } from '../URLs';\nimport { Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport SockJsClient from \"react-stomp\";\nimport cryptoJs from 'crypto-js';\n\n\nexport default function Home() \n{\n\n  const useStyle = makeStyles((theme) =>({\n    app:\n    {\n      display:\"grid\",\n      placeItems:\"center\",\n      backgroundColor:\"#ffdfc9\",\n      height:\"100vh\",\n      backgroundSize:\"cover\",\n      backgroundRepeat:\"no-repeat\",\n      backgroundImage:`URL(${Background})`,\n    },\n    app_body:\n    {\n        display:\"flex\",\n        backgroundColor:\"white\",\n        height:\"90vh\",\n        width:\"90vw\",\n        boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.2)\",\n    },\n    }));\n    const classes=useStyle();\n    let me=null;\n    let configToken=null;\n  if(localStorage.getItem(\"user\")!==null)\n  {\n    try\n   {\n   var bytes = cryptoJs.AES.decrypt(localStorage.getItem(\"user\"),simetricKeyS);\n   me = JSON.parse(bytes.toString(cryptoJs.enc.Utf8));\n   \n \n    if(me!==null)\n    {\n      configToken={ headers: {Authorization:\"Bearer \"+me.token,UserName:me.username}};\n    }\n    }\n    catch(error)\n    {\n      alert(\"Bad decrypt\");\n    }\n  }\n\n  let [receiver,setReceiver]=useState({});\n  let [redirectToLogin,setRedirectToLogin]=useState(false);\n  let [onlineMembers,setOnlineMembers]=useState([]);\n  const[clientRef2,setClientRef2]=useState(null);\n  let notice={name:\"bye\",message:\"bye\"}\n  let [messages,setMessages]=useState([]);\n\n  React.useEffect(()=>{axios.get(onlineMembersUrl,configToken).then(res=>{setOnlineMembers(res.data);console.log(res.data)}).catch(function (error){console.log(error)});},[]);\n  React.useEffect(()=>{axios.get(messageUrl+me.id+\"/\"+((receiver.id===undefined)?\"0\":receiver.id),configToken).then(res=>{setMessages(res.data)}).catch(function (error){console.log(error)});},[]);\n  function logout()\n  { \n    axios.get(membersUrl+me.id+offlineStatusEnd,configToken).then(console.log(\"you are online now\")).catch(function (error) //podesi svoj status na offline\n            {\n              console.log(error);\n            });\n    axios.post(sendNoticeOnlineStatusUrl,notice,configToken).then(console.log(\"you are offline now\")).catch(function (error) //posalji svima obavjest da si offline\n    {\n      console.log(error);\n    });\n    localStorage.removeItem(\"user\");\n    sessionStorage.removeItem(\"emailTokenStored\");\n    setRedirectToLogin(true);\n  }\n\n  function updateOnline()\n  {\n    axios.get(onlineMembersUrl,configToken).then(res=>{setOnlineMembers(res.data);console.log(\"punimo bazu online iz metode\")}).catch(function (error){console.log(error)});\n  }\n\n  function loadMessagesForChat(receiverDirect)\n  {\n    axios.get(messageUrl+me.id+\"/\"+receiverDirect.id,configToken).then(res=>{setMessages(res.data)}).catch(function (error){console.log(error)});\n  }\n\n  if(redirectToLogin)\n  {\n    return <Navigate to={loginEnd}/>\n  }\n  return (<div className={classes.app}>\n    <div className={classes.app_body}>\n    <Sidebar setReceiver={setReceiver} logout={logout} onlineMembers={onlineMembers} loadMessagesForChat={loadMessagesForChat}/>\n    <Chat receiver={receiver} messages={messages} setMessages={setMessages} logout={logout}/>\n    <SockJsClient url={serverWebSocketUrl}\n        topics={[\"/topic/user\"]}\n        onConnect={()=>{\n            console.log(\"Socket for online status connected\");\n            axios.get(membersUrl+me.id+onlineStatusEnd,configToken).then(console.log(\"you are online now\")).catch(function (error)\n            {\n              console.log(error);\n            })\n            let notice={name:me.username,message:me.usernmae};\n            axios.post(sendNoticeOnlineStatusUrl,notice,configToken).then(console.log(\"everybody i am online\")).catch(function (error) //posalji svima obavjest da si offline\n            {\n              console.log(error);\n            });\n            ;}}\n\n        onDisconnect={()=>{console.log(\"Disconnected\");\n        axios.get(membersUrl+me.id+offlineStatusEnd,configToken).then(console.log(\"you are offline now\")).catch(function (error)\n        {\n          console.log(error);\n        });\n        axios.post(sendNoticeOnlineStatusUrl,notice,configToken).then(console.log(\"everybody i am offline\")).catch(function (error) //posalji svima obavjest da si offline\n        {\n          console.log(error);\n        });\n        }}\n\n        onMessage={(msg)=>{\n          updateOnline();\n        }}\n        onClose={(e)=>{\n          axios.get(membersUrl+me.id+offlineStatusEnd,configToken).then(console.log(\"you are offline now\")).catch(function (error)\n          {\n            console.log(error);\n          });\n          axios.post(sendNoticeOnlineStatusUrl,notice,configToken).then(console.log(\"everybody i am offline\")).catch(function (error) //posalji svima obavjest da si offline\n          {\n            console.log(error);\n          });\n\n        \n           \n        }}\n\n        ref={(client)=>{\n            setClientRef2(client);\n        }}>\n        </SockJsClient>\n\n    </div>\n  </div>\n  \n);\n}\n\n"]},"metadata":{},"sourceType":"module"}