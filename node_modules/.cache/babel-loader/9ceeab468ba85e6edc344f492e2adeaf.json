{"ast":null,"code":"var _jsxFileName = \"/home/flic/messengerfafront/src/components/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Sidebar from './Sidebar';\nimport Chat from './Chat';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Grid } from '@material-ui/core';\nimport Background from \"../background.jpg\";\nimport { loginEnd, membersUrl, offlineStatusEnd, sendNoticeOnlineStatusUrl } from '../URLs';\nimport { Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  const useStyle = makeStyles(theme => ({\n    app: {\n      display: \"grid\",\n      placeItems: \"center\",\n      backgroundColor: \"#ffdfc9\",\n      height: \"100vh\",\n      backgroundSize: \"cover\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundImage: `URL(${Background})`\n    },\n    app_body: {\n      display: \"flex\",\n      backgroundColor: \"white\",\n      height: \"90vh\",\n      width: \"90vw\",\n      boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.2)\"\n    }\n  }));\n  const classes = useStyle();\n  const me = JSON.parse(localStorage.getItem(\"user\"));\n  let [receiver, setReceiver] = useState(null);\n  let [redirectToLogin, setRedirectToLogin] = useState(false);\n\n  function logout() {\n    axios.get(membersUrl + me.id + offlineStatusEnd).then(console.log(\"you are online now\")).catch(function (error) //podesi svoj status na offline\n    {\n      console.log(error);\n    });\n    let notice = {\n      name: me.username,\n      message: me.usernmae + \" is offline\"\n    };\n    axios.post(sendNoticeOnlineStatusUrl, notice).then(console.log(\"you are offline now\")).catch(function (error) //posalji svima obavjest da si offline\n    {\n      console.log(error);\n    });\n    localStorage.removeItem(\"user\");\n    sessionStorage.removeItem(\"emailTokenStored\");\n    setRedirectToLogin(true);\n  }\n\n  if (redirectToLogin) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: loginEnd\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.app,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.app_body,\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n        setReceiver: setReceiver,\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Chat, {\n        receiver: receiver\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(SockJsClient, {\n      url: serverWebSocketUrl,\n      topics: [topicsUrl + me.username, \"/topic/user\"],\n      onConnect: () => {\n        console.log(\"Connected\");\n        axios.get(membersUrl + me.id + onlineStatusEnd).then(console.log(\"you are online now\")).catch(function (error) {\n          console.log(error);\n        });\n      },\n      onDisconnect: () => {\n        console.log(\"Disconnected\");\n      },\n      onMessage: msg => {\n        setMessages([...messages, msg]);\n        console.log(msg);\n      },\n      ref: client => {\n        setClientRef(client);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 11\n  }, this);\n}\n\n_s(Home, \"yXnH2Sb2Hr/S+z9N1JBNxoA8ZRg=\", true);\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/flic/messengerfafront/src/components/Home.js"],"names":["React","useState","Sidebar","Chat","makeStyles","Grid","Background","loginEnd","membersUrl","offlineStatusEnd","sendNoticeOnlineStatusUrl","Navigate","axios","Home","useStyle","theme","app","display","placeItems","backgroundColor","height","backgroundSize","backgroundRepeat","backgroundImage","app_body","width","boxShadow","classes","me","JSON","parse","localStorage","getItem","receiver","setReceiver","redirectToLogin","setRedirectToLogin","logout","get","id","then","console","log","catch","error","notice","name","username","message","usernmae","post","removeItem","sessionStorage","serverWebSocketUrl","topicsUrl","onlineStatusEnd","msg","setMessages","messages","client","setClientRef"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,SAASC,QAAT,EAAmBC,UAAnB,EAA+BC,gBAA/B,EAAiDC,yBAAjD,QAAkF,SAAlF;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,eAAe,SAASC,IAAT,GACf;AAAA;;AAEE,QAAMC,QAAQ,GAAGV,UAAU,CAAEW,KAAD,KAAW;AACrCC,IAAAA,GAAG,EACH;AACEC,MAAAA,OAAO,EAAC,MADV;AAEEC,MAAAA,UAAU,EAAC,QAFb;AAGEC,MAAAA,eAAe,EAAC,SAHlB;AAIEC,MAAAA,MAAM,EAAC,OAJT;AAKEC,MAAAA,cAAc,EAAC,OALjB;AAMEC,MAAAA,gBAAgB,EAAC,WANnB;AAOEC,MAAAA,eAAe,EAAE,OAAMjB,UAAW;AAPpC,KAFqC;AAWrCkB,IAAAA,QAAQ,EACR;AACIP,MAAAA,OAAO,EAAC,MADZ;AAEIE,MAAAA,eAAe,EAAC,OAFpB;AAGIC,MAAAA,MAAM,EAAC,MAHX;AAIIK,MAAAA,KAAK,EAAC,MAJV;AAKIC,MAAAA,SAAS,EAAE;AALf;AAZqC,GAAX,CAAD,CAA3B;AAoBE,QAAMC,OAAO,GAACb,QAAQ,EAAtB;AACF,QAAMc,EAAE,GAACC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAT;AACA,MAAI,CAACC,QAAD,EAAUC,WAAV,IAAuBjC,QAAQ,CAAC,IAAD,CAAnC;AACA,MAAI,CAACkC,eAAD,EAAiBC,kBAAjB,IAAqCnC,QAAQ,CAAC,KAAD,CAAjD;;AAEA,WAASoC,MAAT,GACA;AACEzB,IAAAA,KAAK,CAAC0B,GAAN,CAAU9B,UAAU,GAACoB,EAAE,CAACW,EAAd,GAAiB9B,gBAA3B,EAA6C+B,IAA7C,CAAkDC,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAlD,EAAqFC,KAArF,CAA2F,UAAUC,KAAV,EAAiB;AACpG;AACEH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,KAHT;AAIA,QAAIC,MAAM,GAAC;AAACC,MAAAA,IAAI,EAAClB,EAAE,CAACmB,QAAT;AAAkBC,MAAAA,OAAO,EAACpB,EAAE,CAACqB,QAAH,GAAY;AAAtC,KAAX;AACArC,IAAAA,KAAK,CAACsC,IAAN,CAAWxC,yBAAX,EAAqCmC,MAArC,EAA6CL,IAA7C,CAAkDC,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAlD,EAAsFC,KAAtF,CAA4F,UAAUC,KAAV,EAAiB;AAC7G;AACEH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,KAHD;AAIAb,IAAAA,YAAY,CAACoB,UAAb,CAAwB,MAAxB;AACAC,IAAAA,cAAc,CAACD,UAAf,CAA0B,kBAA1B;AACAf,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD;;AAED,MAAGD,eAAH,EACA;AACE,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAE5B;AAAd;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AACD,sBAAQ;AAAK,IAAA,SAAS,EAAEoB,OAAO,CAACX,GAAxB;AAAA,4BACN;AAAK,MAAA,SAAS,EAAEW,OAAO,CAACH,QAAxB;AAAA,8BACA,QAAC,OAAD;AAAS,QAAA,WAAW,EAAEU,WAAtB;AAAmC,QAAA,MAAM,EAAEG;AAA3C;AAAA;AAAA;AAAA;AAAA,cADA,eAEA,QAAC,IAAD;AAAM,QAAA,QAAQ,EAAEJ;AAAhB;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAAA;AAAA;AAAA;AAAA,YADM,eAKN,QAAC,YAAD;AAAc,MAAA,GAAG,EAAEoB,kBAAnB;AACI,MAAA,MAAM,EAAE,CAACC,SAAS,GAAC1B,EAAE,CAACmB,QAAd,EAAuB,aAAvB,CADZ;AAEI,MAAA,SAAS,EAAE,MAAI;AACXN,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA9B,QAAAA,KAAK,CAAC0B,GAAN,CAAU9B,UAAU,GAACoB,EAAE,CAACW,EAAd,GAAiBgB,eAA3B,EAA4Cf,IAA5C,CAAiDC,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAjD,EAAoFC,KAApF,CAA0F,UAAUC,KAAV,EAC1F;AACEH,UAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,SAHD;AAGI,OAPZ;AAQI,MAAA,YAAY,EAAE,MAAI;AAACH,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AAClB,OATL;AAUI,MAAA,SAAS,EAAGc,GAAD,IAAO;AACdC,QAAAA,WAAW,CAAC,CAAC,GAAGC,QAAJ,EAAaF,GAAb,CAAD,CAAX;AACAf,QAAAA,OAAO,CAACC,GAAR,CAAYc,GAAZ;AACH,OAbL;AAcI,MAAA,GAAG,EAAGG,MAAD,IAAU;AACXC,QAAAA,YAAY,CAACD,MAAD,CAAZ;AACH;AAhBL;AAAA;AAAA;AAAA;AAAA,YALM;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AA2BD;;GA3EuB9C,I;;KAAAA,I","sourcesContent":["import React, { useState } from 'react';\nimport Sidebar from './Sidebar';\nimport Chat from './Chat';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { Grid } from '@material-ui/core';\nimport Background from \"../background.jpg\";\nimport { loginEnd, membersUrl, offlineStatusEnd, sendNoticeOnlineStatusUrl } from '../URLs';\nimport { Navigate } from 'react-router-dom';\nimport axios from 'axios';\n\n\nexport default function Home() \n{\n\n  const useStyle = makeStyles((theme) =>({\n    app:\n    {\n      display:\"grid\",\n      placeItems:\"center\",\n      backgroundColor:\"#ffdfc9\",\n      height:\"100vh\",\n      backgroundSize:\"cover\",\n      backgroundRepeat:\"no-repeat\",\n      backgroundImage:`URL(${Background})`,\n    },\n    app_body:\n    {\n        display:\"flex\",\n        backgroundColor:\"white\",\n        height:\"90vh\",\n        width:\"90vw\",\n        boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.2)\",\n    },\n    }));\n    const classes=useStyle();\n  const me=JSON.parse(localStorage.getItem(\"user\"))\n  let [receiver,setReceiver]=useState(null);\n  let [redirectToLogin,setRedirectToLogin]=useState(false);\n\n  function logout()\n  { \n    axios.get(membersUrl+me.id+offlineStatusEnd).then(console.log(\"you are online now\")).catch(function (error) //podesi svoj status na offline\n            {\n              console.log(error);\n            });\n    let notice={name:me.username,message:me.usernmae+\" is offline\"}\n    axios.post(sendNoticeOnlineStatusUrl,notice).then(console.log(\"you are offline now\")).catch(function (error) //posalji svima obavjest da si offline\n    {\n      console.log(error);\n    });\n    localStorage.removeItem(\"user\");\n    sessionStorage.removeItem(\"emailTokenStored\");\n    setRedirectToLogin(true);\n  }\n\n  if(redirectToLogin)\n  {\n    return <Navigate to={loginEnd}/>\n  }\n  return (<div className={classes.app}>\n    <div className={classes.app_body}>\n    <Sidebar setReceiver={setReceiver} logout={logout}/>\n    <Chat receiver={receiver}/>\n    </div>\n    <SockJsClient url={serverWebSocketUrl}\n        topics={[topicsUrl+me.username,\"/topic/user\"]}\n        onConnect={()=>{\n            console.log(\"Connected\");\n            axios.get(membersUrl+me.id+onlineStatusEnd).then(console.log(\"you are online now\")).catch(function (error)\n            {\n              console.log(error);\n            });}}\n        onDisconnect={()=>{console.log(\"Disconnected\");\n        }}\n        onMessage={(msg)=>{\n            setMessages([...messages,msg]);\n            console.log(msg);\n        }}\n        ref={(client)=>{\n            setClientRef(client);\n        }}>\n        </SockJsClient>\n  \n  </div>\n  \n);\n}\n\n"]},"metadata":{},"sourceType":"module"}