{"ast":null,"code":"var _jsxFileName = \"/home/flic/messengerfafront/src/components/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Sidebar from './Sidebar';\nimport Chat from './Chat';\nimport SockJsClient from \"react-stomp\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Grid } from '@material-ui/core';\nimport Background from \"../background.jpg\";\nimport { Link, Navigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport { onlineMembersUrl, serverWebSocketUrl, topicsUrl, loginEnd, membersUrl, offlineStatusEnd, sendNoticeOnlineUrl, onlineStatusEnd } from '../URLs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n\n  const useStyle = makeStyles(theme => ({\n    app: {\n      display: \"grid\",\n      placeItems: \"center\",\n      backgroundColor: \"#ffdfc9\",\n      height: \"100vh\",\n      backgroundSize: \"cover\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundImage: `URL(${Background})`\n    },\n    app_body: {\n      display: \"flex\",\n      backgroundColor: \"white\",\n      height: \"90vh\",\n      width: \"90vw\",\n      boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.2)\"\n    }\n  }));\n  const classes = useStyle();\n  const me = JSON.parse(localStorage.getItem(\"user\"));\n  let [receiver, setReceiver] = useState(null);\n  let [onlineMembers, setOnlineMembers] = useState([]);\n  const [clientRef2, setClientRef2] = useState(null);\n  let [redirectToLogin, setRedirectToLogin] = useState(false);\n\n  function logout() {\n    axios.get(membersUrl + me.id + offlineStatusEnd).then(console.log(\"you are offline now\")).catch(function (error) {\n      console.log(error);\n    });\n    localStorage.removeItem(\"user\");\n    sessionStorage.removeItem(\"emailTokenStored\");\n    setRedirectToLogin(true);\n  }\n\n  function sendNoticeOnline(messagetxt) {\n    let notice = {\n      name: me.username,\n      message: me.username\n    };\n    axios.post(sendNoticeOnlineUrl, notice).then(console.log(\"you have informed everyone that you are online\")).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  React.useEffect(() => {\n    axios.get(onlineMembersUrl).then(res => {\n      setOnlineMembers(res.data);\n      console.log(\"hahaha\" + res.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n\n  if (redirectToLogin) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: loginEnd\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.app,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.app_body,\n      children: [/*#__PURE__*/_jsxDEV(SockJsClient, {\n        url: serverWebSocketUrl,\n        topics: [\"/topic/user\"],\n        onConnect: () => {\n          console.log(\"Connected for Online members\");\n          axios.get(membersUrl + me.id + onlineStatusEnd).then(res => {\n            sendNoticeOnline();\n            console.log(\"you are online now\");\n          }).catch(function (error) {\n            console.log(error);\n          });\n        },\n        onDisconnect: () => {\n          console.log(\"Disconnected\");\n          axios.get(membersUrl + me.id + offlineStatusEnd).then(console.log(\"you are offline now\")).catch(function (error) {\n            console.log(error);\n          });\n        },\n        onMessage: newMember => {\n          setOnlineMembers([...onlineMembers, newMember]);\n          console.log(newMember);\n        },\n        ref: client => {\n          setClientRef2(client);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n        setReceiver: setReceiver,\n        onlineMembers: onlineMembers,\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Chat, {\n        receiver: receiver\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 11\n  }, this);\n}\n\n_s(Home, \"TuZ4fdL5t+qc3BU3oHZz8Wm8Cyo=\", true);\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/flic/messengerfafront/src/components/Home.js"],"names":["React","useState","Sidebar","Chat","SockJsClient","makeStyles","Grid","Background","Link","Navigate","axios","onlineMembersUrl","serverWebSocketUrl","topicsUrl","loginEnd","membersUrl","offlineStatusEnd","sendNoticeOnlineUrl","onlineStatusEnd","Home","useStyle","theme","app","display","placeItems","backgroundColor","height","backgroundSize","backgroundRepeat","backgroundImage","app_body","width","boxShadow","classes","me","JSON","parse","localStorage","getItem","receiver","setReceiver","onlineMembers","setOnlineMembers","clientRef2","setClientRef2","redirectToLogin","setRedirectToLogin","logout","get","id","then","console","log","catch","error","removeItem","sessionStorage","sendNoticeOnline","messagetxt","notice","name","username","message","post","useEffect","res","data","newMember","client"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Sidebar from './Sidebar';\nimport Chat from './Chat';\nimport SockJsClient from \"react-stomp\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport { Grid } from '@material-ui/core';\nimport Background from \"../background.jpg\";\nimport {Link,Navigate} from \"react-router-dom\";\nimport axios from 'axios';\nimport { onlineMembersUrl, serverWebSocketUrl, topicsUrl,loginEnd,membersUrl,offlineStatusEnd,sendNoticeOnlineUrl,onlineStatusEnd } from '../URLs';\n\n\nexport default function Home() \n{\n\n  const useStyle = makeStyles((theme) =>({\n    app:\n    {\n      display:\"grid\",\n      placeItems:\"center\",\n      backgroundColor:\"#ffdfc9\",\n      height:\"100vh\",\n      backgroundSize:\"cover\",\n      backgroundRepeat:\"no-repeat\",\n      backgroundImage:`URL(${Background})`,\n    },\n    app_body:\n    {\n        display:\"flex\",\n        backgroundColor:\"white\",\n        height:\"90vh\",\n        width:\"90vw\",\n        boxShadow: \"-1px 4px 20px -6px rgba(0,0,0,0.2)\",\n    },\n    }));\n\n\n    const classes=useStyle();\n    const me=JSON.parse(localStorage.getItem(\"user\"));\n    let [receiver,setReceiver]=useState(null);\n    let [onlineMembers,setOnlineMembers]=useState([]);\n    const[clientRef2,setClientRef2]=useState(null);\n    let [redirectToLogin,setRedirectToLogin]=useState(false);\n\n\n    function logout()\n    {\n       axios.get(membersUrl+me.id+offlineStatusEnd).then(console.log(\"you are offline now\")).catch(function (error)\n        {\n          console.log(error);\n        });\n        localStorage.removeItem(\"user\");\n        sessionStorage.removeItem(\"emailTokenStored\");\n        setRedirectToLogin(true);\n    }\n\n\n    function sendNoticeOnline(messagetxt)\n    {\n      let notice={name:me.username,message:me.username};\n      axios.post(sendNoticeOnlineUrl,notice).then(console.log(\"you have informed everyone that you are online\")).catch(function (error)\n      {\n        console.log(error);\n      });\n    }\n\n\n  React.useEffect(()=>{axios.get(onlineMembersUrl).then(res=>{setOnlineMembers(res.data);console.log(\"hahaha\"+res.data)}).catch(function (error){console.log(error)});},[]);\n  \n\n  if(redirectToLogin)\n  {\n    return <Navigate to={loginEnd}/>\n  }\n\n\n  return (<div className={classes.app}>\n    <div className={classes.app_body}>\n    <SockJsClient url={serverWebSocketUrl}\n        topics={[\"/topic/user\"]}\n\n        onConnect={()=>{console.log(\"Connected for Online members\");\n        axios.get(membersUrl+me.id+onlineStatusEnd).then(res=>{\n\n          sendNoticeOnline();\n          console.log(\"you are online now\");\n          \n        }\n          \n          ).catch(function (error)\n        {\n          console.log(error);\n        });\n\n      }}\n        \n        onDisconnect={()=>{console.log(\"Disconnected\");\n        axios.get(membersUrl+me.id+offlineStatusEnd).then(console.log(\"you are offline now\")).catch(function (error)\n        {\n          console.log(error);\n        });\n      }}\n\n        onMessage={(newMember)=>{\n          setOnlineMembers([...onlineMembers,newMember]);\n           console.log(newMember);\n        }}\n\n        ref={(client)=>{\n            setClientRef2(client);\n        }}>\n        </SockJsClient>\n\n    <Sidebar setReceiver={setReceiver} onlineMembers={onlineMembers} logout={logout}/>\n    <Chat receiver={receiver}/>\n    </div>\n  \n  </div>\n  \n);\n}\n\n"]},"metadata":{},"sourceType":"module"}